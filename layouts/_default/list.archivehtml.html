{{ define "main" }}
<section class="archive">
	<header class="archive-header">
		<h2 class="post-title">Archive</h2>
	</header>
	
	{{ $list := sort ($.Site.GetPage "taxonomyTerm" "categories").Pages "Title" }}	
	{{ if gt (len $list) 0 }}
	<section class="archive-categories">
		<h3>Categories</h3>
		<nav class="category-list">
			{{ range $list }}
			<a class="button" href="{{ .Permalink }}">{{ .Title }}</a>
			{{ end }}
		</nav>
	</section>
	{{ end }}
	
	<section class="full-archives">
		<h3>Full post list</h3>
		{{ $list := (where .Site.Pages "Type" "post") }}
		{{ range $list }}
		<article class="archive-item">
			<time datetime="{{ .Date.Format "2006-01-02T15:04:05-07:00" }}">{{ partial "dateformat/short" . }}</time>:
			{{ if .Title }}
			<header class="archive-item-header">
				<h4><a href="{{ .Permalink }}">{{ .Title }}</a></h4>
			</header>
			{{ end }}
			<section class="archive-item-excerpt">{{ .Content | plainify | htmlUnescape | truncate 150 }}</section>
		</article>
		{{ end }}
	</section>
</section>
{{ end }}
